#!/usr/bin/env php
<?php

$app = require_once __DIR__ . '/bootstrap.php';

use Monolog\Logger;
use Monolog\Handler\StreamHandler;
use Symfony\Component\Console\Application;
use Symfony\Component\Console\Input\InputArgument;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Input\InputOption;
use Symfony\Component\Console\Output\OutputInterface;
use TrainingWheels\Log\Log;
use TrainingWheels\Console\UserRetrieve;
use TrainingWheels\Console\UserCreate;
use TrainingWheels\Console\UserDelete;
use TrainingWheels\Console\ResourceCreate;
use TrainingWheels\Console\ResourceDelete;
use TrainingWheels\Console\ResourceSync;

$log = new Logger('tw');
$log->pushHandler(new StreamHandler('../log/cli.log', Logger::DEBUG));

Log::$instance = new Log($log);
Log::log('Initializing CLI application', L_INFO);

$console = new Application();
$console->add(new UserRetrieve($app));
$console->add(new UserCreate($app));
$console->add(new UserDelete($app));
$console->add(new ResourceCreate($app));
$console->add(new ResourceDelete($app));
$console->add(new ResourceSync($app));

$console->run();
